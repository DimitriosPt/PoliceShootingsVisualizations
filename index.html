<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sunburst w/ Zooming and Breadcrumbs</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css">
    <link rel='stylesheet prefetch' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css'>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="css/style.css">
	<link rel="stylesheet" type="text/css" href="css/map-style.css">
    <script src ="js/pageable.js"></script>

    <script src="https://d3js.org/d3.v3.min.js"></script>
    <script src="//d3js.org/d3.v3.min.js"></script>
    <script src="//d3js.org/topojson.v1.min.js"></script>

</head>

<script src="js/d3.min.js"></script>
<main id ="main_page">
    <section data-anchor="Splash Page">
        <div  style="height: 100%; background-image: linear-gradient(rgb(0, 51, 102), rgb(128, 128, 128), rgb(102, 0, 0) )">
            This is the splash page!
        </div>

    </section>
    <section data-anchor="Page 1">
        <header>
            <h1>Exploring Police Shootings By State and Race</h1>
        </header>
        <div class="crumbs">
            <!-- Crumbs dynamically appended -->
        </div>
        <div class="container">
            <div class="chart">
                <div id="explanation" style="visibility: hidden;">
                    <center><span id="name"></span></center>
                    <br/>

                </div>
            </div>
        </div>
        <script src='https://s3-us-west-2.amazonaws.com/s.cdpn.io/22878/d3.min.js'></script>
        <script src="js/index.js"></script>

        <div id="legend"></div>

    </section>
    <section data-anchor="Page 2">
        <div id="page-2-container" style="width: 100%; height: 90%; display: flex; padding-top: 40px">
            <div id = "page-2-left" style="float: left; width: 20%;">
                Key Observations
                <ul>
                    <li>California is consistently the state with the highest number of cases </li>
                    <li>Texas and Florida also have a very high frequency of cases</li>
                    <li>Cases involving Asian victims seem to be primarily on the West Coast</li>
                    <li>Cases involving Hispanic victims seem to be much higher in states
                        that share a border with Mexico</li>
                    <li>Cases involving African American victims seem to be widely dispersed around the East Coast</li>
                    <li>North and South Dakota have very few cases</li>
                </ul>

            </div>
            <div id = map-container style="text-align: center; padding-top: 20px; width: 60%">
                <div id="tooltip"></div><!-- div to hold tooltip. -->


                <script src="js/uStates.js"></script> <!-- creates uStates. -->
                <style>

                    .land {
                        fill: #fff;
                        stroke: #ccc;
                    }

                    .state {
                        fill: #ccc;
                        stroke: #666;
                    }

                </style>
                <h1 style="text-align: center">
                    Fatal Shootings By Race
                </h1>
                <form style="text-align: center">
                    <label><input type="radio" name="race" id="asian"> Asian</label>
                    <label><input type="radio" name="race" id="white"> White</label>
                    <label><input type="radio" name="race" id="africanamerican">African American</label>
                    <label><input type="radio" name="race" id="nativeamerican"> Native American</label>
                    <label><input type="radio" name="race" id="hispanic"> Hispanic </label>
                    <label><input type="radio" name="race" id="other"> Other</label>
                    <label><input type="radio" name="race" id="unknown"> Unknown</label>
                </form>

                <script>

                    var path = d3.geo.path();

                    var svg = d3.select("#map-container").append("svg")
                        .attr("width", 960)
                        .attr("height", 500)
                        .attr("align", "center");

                    var color = d3.scale.linear()
                        .range(['white', 'red']);

                    var stuff = []

                    d3.csv('grouped_filtered.csv', function(data){
                        stuff.push(data)
                        var scale = d3.extent(data, function(x){return +x.Asian})
                        var scale = scale.concat(d3.extent(data, function(x){return +x.Black}))
                        var scale = scale.concat(d3.extent(data, function(x){return +x.White}))
                        var scale = scale.concat(d3.extent(data, function(x){return +x.Native}))
                        var scale = scale.concat(d3.extent(data, function(x){return +x.pacisland}))
                        var scale = scale.concat(d3.extent(data, function(x){return +x.Hispanic}))
                        var scale = scale.concat(d3.extent(data, function(x){return +x.Other}))
                        var scale = scale.concat(d3.extent(data, function(x){return +x.Unknown}))
                        color.domain(d3.extent(scale)) //scales the colors of each state to the number of
                        //cases in each state
                    });

                    getinfo = function(x){
                        return stuff[0].filter(function(z){return String(z.id) == x});
                    };


                    d3.json("us.json", function(error, us) {
                        if (error) throw error;

// this part makes the full map
                        svg.append("path")
                            .datum(topojson.feature(us, us.objects.land))
                            .attr("class", "land")
                            .attr("d", path);


// modify the json so it has the info you need in the actual object

                        var all_states = topojson.feature(us, us.objects.states).features;
                        all_states.forEach(function(d){d.info = getinfo(d.id)[0]});
                        var all_states = all_states.filter(function(d){return d.info != undefined});
                        all_states.forEach(function(d){d.state = d.info.state});

//make the states

                        svg.selectAll(".state")
                            .data(all_states)
                            .enter().append("path")
                            .attr("class", "state")
                            .attr("d", path);

// label the states
                        svg.selectAll("text")
                            .data(all_states)
                            .enter()
                            .append("svg:text")
                            .text(function(d){return d.info.state})
                            .attr("x", function(d){
                                return path.centroid(d)[0];
                            })
                            .attr("y", function(d){
                                return  path.centroid(d)[1];
                            })
                            .attr("text-anchor","middle")
                            .attr('font-size','6pt');

                    });

                    var asians = function(){
                        d3.selectAll('.state').transition().duration(800).style('fill',function(d){return color(+d.info.Asian)});
                    };

                    var whites = function(){
                        d3.selectAll('.state').transition().duration(800).style('fill',function(d){return color(+d.info.White)});
                    };

                    var afro_am = function(){
                        d3.selectAll('.state').transition().duration(800).style('fill',function(d){return color(+d.info.Black)});
                    };

                    var native_am = function(){
                        d3.selectAll('.state').transition().duration(800).style('fill',function(d){return color(+d.info.Native)});
                    };

                    var pacisland = function(){
                        d3.selectAll('.state').transition().duration(800).style('fill',function(d){return color(+d.info.pacisland)});
                    };

                    var hispanics = function(){
                        d3.selectAll('.state').transition().duration(800).style('fill',function(d){return color(+d.info.Hispanic)});
                    };
                    var others = function(){
                        d3.selectAll('.state').transition().duration(800).style('fill',function(d){return color(+d.info.Other)});
                    };
                    var unknowns = function(){
                        d3.selectAll('.state').transition().duration(800).style('fill',function(d){return color(+d.info.Unknown)});
                    };


                    d3.selectAll('#asian').on('change', asians);
                    d3.selectAll('#white').on('change', whites);
                    d3.selectAll('#africanamerican').on('change', afro_am);
                    d3.selectAll('#nativeamerican').on('change', native_am);
                    d3.selectAll('#pacificislander').on('change', pacisland);
                    d3.selectAll('#hispanic').on('change', hispanics);
                    d3.selectAll('#other').on('change', others);
                    d3.selectAll('#unknown').on('change', unknowns);
                </script>
            </div>
            <div id = "page-2-right" style="float: left; width: 20%;">Things To Keep In Mind</div>
        </div>

    </section>

    <section data-anchor="Page 3">
        <div class='tableauPlaceholder' id='viz1575599612009' style='position: relative'><noscript><a href='#'><img alt=' '
                        src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Sh&#47;ShotBubble&#47;Dashboard1&#47;1_rss.png'
                        style='border: none' /></a></noscript><object class='tableauViz' style='display:none;'>
                <param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' />
                <param name='embed_code_version' value='3' />
                <param name='site_root' value='' />
                <param name='name' value='ShotBubble&#47;Dashboard1' />
                <param name='tabs' value='no' />
                <param name='toolbar' value='yes' />
                <param name='static_image'
                    value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Sh&#47;ShotBubble&#47;Dashboard1&#47;1.png' />
                <param name='animate_transition' value='yes' />
                <param name='display_static_image' value='yes' />
                <param name='display_spinner' value='yes' />
                <param name='display_overlay' value='yes' />
                <param name='display_count' value='yes' />
                <param name='filter' value='publish=yes' /></object></div>
        <script type='text/javascript'>                    
            var divElement = document.getElementById('viz1575599612009'); 
            var vizElement = divElement.getElementsByTagName('object')[0]; 
            vizElement.style.minWidth = '1520px'; 
            vizElement.style.maxWidth = '1620px'; 
            vizElement.style.width = '100%'; 
            vizElement.style.minHeight = '587px'; 
            vizElement.style.maxHeight = '887px'; 
            vizElement.style.height = (divElement.offsetWidth * 0.75) + 'px'; 
            var scriptElement = document.createElement('script'); 
            scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js'; 
            vizElement.parentNode.insertBefore(scriptElement, vizElement);                
        </script>
    </section>
    <section data-anchor="Page 4">
        <div id="page-4-container" style="width: 100%; height: 99%; display: flex" >
            <div id="bar-chart-container" style="float: left; width: 50%; bottom: 0px">
                <div class='tableauPlaceholder' id='viz1575592827643' style='position: relative'>
                    <noscript><a href='#'><img alt=' '
                                               src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Po&#47;PolieSchootings&#47;Sheet1&#47;1_rss.png'
                                               style='border: none'/></a></noscript>
                    <object class='tableauViz' style='display:none;'>
                        <param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F'/>
                        <param name='embed_code_version' value='3'/>
                        <param name='site_root' value=''/>
                        <param name='name' value='PolieSchootings&#47;Sheet1'/>
                        <param name='tabs' value='no'/>
                        <param name='toolbar' value='no'/>
                        <param name='static_image'
                               value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Po&#47;PolieSchootings&#47;Sheet1&#47;1.png'/>
                        <param name='animate_transition' value='yes'/>
                        <param name='display_static_image' value='yes'/>
                        <param name='display_spinner' value='yes'/>
                        <param name='display_overlay' value='yes'/>
                        <param name='display_count' value='yes'/>
                    </object>
                </div>
                <script type='text/javascript'>

                    var divElement = document.getElementById('viz1575592827643');
                    var vizElement = divElement.getElementsByTagName('object')[0];
                    vizElement.style.width = '100%';
                    vizElement.style.height = '100%';
                    var scriptElement = document.createElement('script');
                    scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';
                    vizElement.parentNode.insertBefore(scriptElement, vizElement);
                </script>
            </div>
            <div id="write-and-pie" style="float: left; width: 50%;">
                <div id="page-4-writeup" style="padding-top: 140px; height: 55%; padding-left: 15px; padding-right: 15px;
                 text-align:center" >
                    <p style="line-height: 2">
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus odio dui, rhoncus ac turpis
                        sed, fringilla vulputate magna. Cras est quam, vestibulum eget nunc ac, placerat dictum metus.
                        Vivamus sed purus tellus. Sed vel sapien id eros pretium dictum. Maecenas volutpat est massa, id
                        consequat sapien ultricies placerat. Nam lobortis mi sit amet nisl luctus, ut commodo magna
                        vestibulum. Sed nec metus efficitur, efficitur tortor non, blandit neque. Quisque vestibulum
                        tellus nec elit egestas lobortis.

                        Aenean eu sagittis nibh. In consectetur dui sit amet mauris tincidunt ultricies. Pellentesque a
                        ipsum diam. Donec porttitor dolor eu ultrices tempor. Proin ac felis at nunc posuere aliquam.
                        Aliquam blandit odio libero, id ullamcorper tellus dapibus et. Curabitur luctus orci sed purus
                        molestie, quis fermentum nunc bibendum. Cras quis erat quis odio maximus efficitur. Morbi mattis
                        felis ut mi hendrerit, quis aliquet risus mollis. In pulvinar dapibus tincidunt. Etiam non
                        blandit dolor. Donec consequat facilisis lacus, vel vehicula dolor scelerisque sit amet.
                        Maecenas facilisis fringilla consectetur
                    </p>
                </div>
                <div id="pie" style="bottom: 0px">
                    <div class='tableauPlaceholder' id='viz1575592212925' style='position: relative; height: 45%'>
                        <noscript><a href='#'><img alt=' '
                                                   src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Sh&#47;ShootingsPies&#47;Dashboard1&#47;1_rss.png'
                                                   style='border: none'/></a></noscript>
                        <object class='tableauViz' style='display:none;'>
                            <param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F'/>
                            <param name='embed_code_version' value='3'/>
                            <param name='site_root' value=''/>
                            <param name='name' value='ShootingsPies&#47;Dashboard1'/>
                            <param name='tabs' value='no'/>
                            <param name='toolbar' value='no'/>
                            <param name='static_image'
                                   value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Sh&#47;ShootingsPies&#47;Dashboard1&#47;1.png'/>
                            <param name='animate_transition' value='yes'/>
                            <param name='display_static_image' value='yes'/>
                            <param name='display_spinner' value='yes'/>
                            <param name='display_overlay' value='yes'/>
                            <param name='display_count' value='yes'/>
                            <param name='filter' value='publish=yes'/>
                        </object>
                    </div>
                    <script
                            type='text/javascript'> var divElement = document.getElementById('viz1575592212925');
                    var vizElement = divElement.getElementsByTagName('object')[0];
                    vizElement.style.minWidth = '1520px';
                    vizElement.style.maxWidth = '1620px';
                    vizElement.style.width = '100%';
                    vizElement.style.minHeight = '587px';
                    vizElement.style.maxHeight = '887px';
                    vizElement.style.height = '100%';
                    var scriptElement = document.createElement('script');
                    scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';
                    vizElement.parentNode.insertBefore(scriptElement, vizElement);
                    </script>
                </div>

            </div>
        </div>
    </section>
    <section data-anchor="Page 5">
        Section 5 Baybeeee

    </section>
</main>
<script>
    new Pageable('#main_page', {
        childSelector: "[data-anchor]",// CSS3 selector string for the pages
        anchors: [], // define the page anchors
        pips: true, // display the pips
        animation: 300, // the duration in ms of the scroll animation
        delay: 0, // the delay in ms before the scroll animation starts
        throttle: 50, // the interval in ms that the resize callback is fired
        orientation: "vertical", // or horizontal
        swipeThreshold: 50, // swipe / mouse drag distance (px) before firing the page change event
        freeScroll: false, // allow manual scrolling when dragging instead of automatically moving to next page
        navPrevEl: false, // define an element to use to scroll to the previous page (CSS3 selector string or Element reference)
        navNextEl: false, // define an element to use to scroll to the next page (CSS3 selector string or Element reference)
        infinite: false, // enable infinite scrolling (from 0.4.0)
        events: {
            wheel: true, // enable / disable mousewheel scrolling
            mouse: true, // enable / disable mouse drag scrolling
            touch: true, // enable / disable touch / swipe scrolling
            keydown: true, // enable / disable keyboard navigation
        },
        easing: function(currentTime, startPos, endPos, interval) {
            // the easing function used for the scroll animation
            return -endPos * (currentTime /= interval) * (currentTime - 2) + startPos;
        },
        onInit: function() {
            // do something when the instance is ready
        },
        onUpdate: function() {
            // do something when the instance updates
        },
        onBeforeStart: function() {
            // do something before scrolling begins
        },
        onStart: function() {
            // do something when scrolling begins
        },
        onScroll: function() {
            // do something during scroll
        },
        onFinish: function() {
            // do something when scrolling ends
        },
    });

</script>
<script> new Pageable("#main_page")</script>
<body>

</body>
</html>
